# إعداد اختيار الموقع

## المتطلبات

تم إضافة المكتبات التالية إلى `pubspec.yaml`:
- `geolocator: ^10.1.0` - للحصول على الموقع الحالي
- `geocoding: ^2.1.1` - لتحويل الإحداثيات إلى عناوين والعكس

**ملاحظة**: تم إزالة `google_maps_flutter` لأنه لا يدعم macOS

## خطوات الإعداد

### 1. إعداد الأذونات

#### Android
في ملف `android/app/src/main/AndroidManifest.xml`، أضف:

```xml
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
```

#### iOS
في ملف `ios/Runner/Info.plist`، أضف:

```xml
<key>NSLocationWhenInUseUsageDescription</key>
<string>This app needs access to location when open.</string>
<key>NSLocationAlwaysAndWhenInUseUsageDescription</key>
<string>This app needs access to location when open and in the background.</string>
```

### 2. تشغيل التطبيق

```bash
flutter pub get
flutter run
```

## الميزات الجديدة

### 1. شعار المدرسة إجباري
- يجب اختيار شعار للمدرسة عند الإنشاء
- يمكن رفع صورة أو إدخال رابط URL
- التحقق من صحة البيانات قبل الحفظ

### 2. اختيار الموقع (حل متوافق مع جميع المنصات)
- **استخدام الموقع الحالي**: الحصول على إحداثياتك الحالية
- **إدخال الإحداثيات يدوياً**: إذا كنت تعرف الإحداثيات
- **إدخال العنوان**: للحصول على الإحداثيات تلقائياً
- **تحويل الإحداثيات إلى عنوان**: للحصول على العنوان من الإحداثيات

### 3. تحديث نموذج المدرسة
- إضافة حقول `latitude` و `longitude`
- دعم الإحداثيات في جميع العمليات

## استخدام الميزات

### إنشاء مدرسة جديدة:
1. املأ اسم المدرسة
2. **اختر شعار إجباري** (صورة أو رابط)
3. **اضغط على أيقونة الخريطة** لاختيار الموقع
4. املأ باقي البيانات
5. احفظ المدرسة

### اختيار الموقع:
1. اضغط على أيقونة الخريطة
2. اختر إحدى الطرق التالية:
   - **استخدام الموقع الحالي**: للحصول على إحداثياتك
   - **إدخال الإحداثيات**: إذا كنت تعرفها
   - **إدخال العنوان**: للحصول على الإحداثيات
3. اضغط "تأكيد" لحفظ الموقع

## المزايا

- ✅ **متوافق مع جميع المنصات**: يعمل على macOS و Windows و Linux
- ✅ **لا يحتاج API Key**: لا حاجة لإعداد Google Maps API
- ✅ **سهل الاستخدام**: واجهة بسيطة وواضحة
- ✅ **دقيق**: يستخدم خدمات Google للعناوين والإحداثيات
- ✅ **مرن**: عدة طرق لاختيار الموقع

## ملاحظات مهمة

- تأكد من تفعيل الأذونات المطلوبة
- اختبر التطبيق على جهاز حقيقي للحصول على أفضل تجربة
- يمكن استخدام الموقع الحالي أو إدخال الإحداثيات يدوياً
